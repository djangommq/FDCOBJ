<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <base href="/employee/houseinfo">
        <title>House Info</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
        <meta http-equiv="pragma" content="no-cache">
        <meta http-equiv="cache-control" content="no-cache">
        <meta http-equiv="expires" content="0">
        <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
        <meta http-equiv="description" content="This is my page">
        <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
        <style type="text/css">
            body {
                margin-left: 0px;
                margin-top: 0px;
                margin-right: 0px;
                margin-bottom: 0px;
            }

            .STYLE1 {
                font-size: 12px
            }

            .STYLE3 {
                font-size: 12px;
                font-weight: bold;
            }

            a {
                text-decoration: none;
                color: #033d61;
                font-size: 12px;
            }

            A:hover {
                COLOR: #f60;
                TEXT-DECORATION: underline
            }

            .STYLE4 {
                color: #03515d;
                font-size: 12px;
            }
        </style>

        <script>
            var highlightcolor = '#c1ebff';
            var clickcolor = '#51b2f6';

            function changeto() {
                source = event.srcElement;
                if (source.tagName == "TR" || source.tagName == "TABLE")
                    return;
                while (source.tagName != "TD")
                    source = source.parentElement;
                source = source.parentElement;
                cs = source.children;
                if (cs[1].style.backgroundColor != highlightcolor && source.id != "nc" && cs[1].style.backgroundColor != clickcolor)
                    for (i = 0; i < cs.length; i++) {
                        cs[i].style.backgroundColor = highlightcolor;
                    }
            }

            function changeback() {
                if (event.fromElement.contains(event.toElement) || source.contains(event.toElement) || source.id == "nc")
                    return
                if (event.toElement != source && cs[1].style.backgroundColor != clickcolor)
                    for (i = 0; i < cs.length; i++) {
                        cs[i].style.backgroundColor = "";
                    }
            }

            function add() {
                //只提交到doGet方法
                window.location = "/employee/house/add";
            }
        </script>
    </head>

    <body>
        <form action="/employee/houseinfo" method="post">
        {% csrf_token %}

            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td height="30"
                        background="/static/tab_05.gif">
                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td width="12" height="30">
                                    <img src="/static/tab_03.gif" width="12" height="30"/>
                                </td>
                                <td>
                                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                        <tr>
                                            <td class="STYLE4" align="center">
                                                &nbsp;&nbsp;请输入查询信息：
                                                <input type="text" name="houseInput" style="width: 290px"/>
                                            </td>
                                            <td class="STYLE4">
                                                &nbsp;&nbsp;请选择查询方式：
                                                <select name="queryType" style="width: 100px">
                                                    <option value="1">
                                                        房屋类型
                                                    </option>
                                                    <option value="2">
                                                        房屋地址
                                                    </option>
                                                </select>
                                            </td>
                                            <td class="STYLE4">&nbsp;&nbsp;
                                                <input type="submit" value="查询" style="width: 50px"/>
                                                <input type="hidden" name="userId" value="1"/>
                                            </td>
                                            <td class="STYLE4">&nbsp;&nbsp;
                                                <input type="button" value="添加" onclick="add()" style="width: 50px"/>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td width="16">
                                    <img src="/static/tab_07.gif" width="16" height="30"/>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>

                <tr>
                    <td>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td width="8"
                                    background="/static/tab_12.gif">&nbsp;
                                </td>
                                <td>
                                    <table width="100%" border="0" cellpadding="0" cellspacing="1" bgcolor="b5d6e6" onmouseover="changeto()" onmouseout="changeback()">
                                        <tr>
                                            <td width="3%" background="/static/bg2.gif" bgcolor="#FFFFFF" style="width: 3%; height: 22px;">
                                                <div align="center">
                                                    <span class="STYLE1">序号</span>
                                                </div>
                                            </td>
                                            <td background="/static/bg2.gif" bgcolor="#FFFFFF" style="width: 10%; height: 22px;">
                                                <div align="center">
                                                    <span class="STYLE1">户型</span>
                                                </div>
                                            </td>
                                            <td background="/static/bg2.gif" bgcolor="#FFFFFF" style="width: 5%; height: 22px;">
                                                <div align="center">
                                                    <span class="STYLE1">管理员工</span>
                                                </div>
                                            </td>
                                            <td background="/static/bg2.gif" bgcolor="#FFFFFF" style="width: 20%; height: 22px;">
                                                <div align="center">
                                                    <span class="STYLE1">房屋地址</span>
                                                </div>
                                            </td>
                                            <td background="/static/bg2.gif" bgcolor="#FFFFFF" style="width: 10%; height: 22px;">
                                                <div align="center">
                                                    <span class="STYLE1">房屋价格(平米)</span>
                                                </div>
                                            </td>
                                            <td background="/static/bg2.gif" bgcolor="#FFFFFF" style="width: 30%; height: 22px;">
                                                <div align="center">
                                                    <span class="STYLE1">房屋环境</span>
                                                </div>
                                            </td>
                                            <td width="20%" background="/static/bg2.gif" bgcolor="#FFFFFF" class="STYLE1" style="width: 20%; height: 22px;">
                                                <div align="center">
                                                    基本操作
                                                </div>
                                            </td>
                                        </tr>

                                        {% for house in house_list %}
                                            <tr>
                                                <td height="20" bgcolor="#FFFFFF" style="width: 3%">
                                                    <div align="center" class="STYLE1">
                                                        <div align="center">
                                                            {{ forloop.counter }}
                                                        </div>
                                                    </div>
                                                </td>
                                                <td height="20" bgcolor="#FFFFFF" style="width: 10%">
                                                    <div align="center">
                                                        <span class="STYLE1">{{ house.house_housetype.h_type_name }}</span>
                                                    </div>
                                                </td>
                                                <td height="20" bgcolor="#FFFFFF" style="width: 10%">
                                                    <div align="center">
                                                        <span class="STYLE1">{{ house.house_employee.employee_name }}</span>
                                                    </div>
                                                </td>
                                                <td height="20" bgcolor="#FFFFFF" style="width: 20%">
                                                    <div align="center">
                                                        <span class="STYLE1">{{ house.house_address }}</span>
                                                    </div>
                                                </td>
                                                <td height="20" bgcolor="#FFFFFF" style="width: 10%">
                                                    <div align="center">
                                                        <span class="STYLE1">{{ house.house_price }}</span>
                                                    </div>
                                                </td>
                                                <td height="20" bgcolor="#FFFFFF" style="width: 20%">
                                                    <div align="center">
                                                        <span class="STYLE1">{{ house.house_environment }}</span>
                                                    </div>
                                                </td>
                                                <td height="20" bgcolor="#FFFFFF" style="width: 20%">
                                                    <div align="center">
                                                        <span class="STYLE4">
                                                            <img src="/static/edt.gif" width="16" height="16"/>
                                                                <a href="/employee/house/edit?id={{ house.house_id }}">编辑</a>&nbsp;&nbsp;
                                                            <img src="/static/del.gif" width="16" height="16"/>
                                                                <a href="/employee/house/delete?id={{ house.house_id }}">删除</a>
                                                        </span>
                                                    </div>
                                                </td>
                                            </tr>

                                        {% endfor %}

                                    </table>
                                </td>
                                <td width="8" background="/static/tab_15.gif">&nbsp;</td>
                            </tr>
                        </table>
                    </td>
                </tr>

                <tr>
                    <td height="35" background="/static/tab_19.gif">
                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td width="12" height="35">
                                    <img src="/static/tab_18.gif" width="12" height="35"/>
                                </td>
                                <td>
                                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                        <tr>
                                            <td class="STYLE4">
                                                &nbsp;&nbsp;共有 {{ pages }} 条记录，当前第 {{ num }}/{{ pages }} 页
                                            </td>
                                            <td>
                                                <table border="0" align="right" cellpadding="0" cellspacing="0">
                                                    <tr>
                                                        <td width="40">
                                                            <a href="/employee/houseinfo">
                                                                <img src="/static/first.gif" width="37" height="15"/>
                                                            </a>
                                                        </td>
                                                        <td width="45">
                                                            {% if house_list.has_previous %}
                                                                 <a href="/employee/houseinfo?num={{ house_list.previous_page_number }}">
                                                                     <img src="/static/back.gif" width="43" height="15"/>
                                                                </a>
                                                            {% endif %}
                                                        </td>
                                                        <td width="45">
                                                            {% if house_list.has_next %}
                                                                <a href="/employee/houseinfo?num={{ house_list.next_page_number }}">
                                                                    <img src="/static/next.gif" width="43" height="15"/>
                                                                </a>
                                                            {% endif %}
                                                        </td>
                                                        <td width="40">
                                                            <a href="/employee/houseinfo?num={{ pages }}">
                                                                 <img src="/static/last.gif" width="37" height="15"/>
                                                            </a>
                                                        </td>
                                                        <td width="100">
                                                            <div align="center">
                                                                <span class="STYLE1">转到第
                                                                    <input id="id-num" name="textfield" type="text" size="4" style="height: 12px; width: 20px; border: 1px solid #999999;"/>页
                                                                </span>
                                                            </div>
                                                        </td>
                                                        <td width="40">
                                                            <a href="#">
                                                                <img onclick="aclick();" src="/static/go.gif" width="37" height="15"/>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td width="16">
                                    <img src="/static/tab_20.gif" width="16" height="35"/>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </form>
        <script>
            function aclick() {
                var pagenum = $('#id-num').val()
                var reg = /\d{1,1000}/gi
                if (reg.test(pagenum)) {
                    var urls = "/employee/houseinfo?num=" + pagenum;
                    window.location.href = urls;
                } else {
                    alert('输入不合法')
                }
            }
        </script>
    </body>
</html>
